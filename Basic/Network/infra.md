# Infra architecture

> 작성자 : [장성근](https://github.com/heoap9)  
> 본문서는 "그림으로 공부하는 IT인프라 구조"를 참고하여 작성되었습니다

<details>
<summary>목차</summary>

- [집약형 아키텍쳐](#집약형아키텍쳐)
- [분활형 아키텍쳐](#분활형 아키텍쳐)
- [물리서버와 논리서버](#물리서버와-논리-서버의-차이)
- [수직 분활형 아키텍쳐](#수직분활형-아키텍쳐)
- [3계층형 아키텍쳐](#3계층형-아키텍쳐)
- [수평분활형 아키텍쳐](#수평-분활형-아키텍쳐)


</details>

---

# 인프라? 아키텍쳐?

인프라는 직역하면 기반에 가깝다
예를 들어 우리가 키오스크를 이용하게 된다면 그 가게 내에 존재하는 서비스를 자동으로 처리하기 위한 기반을 가진다

아키텍쳐는 구조라는 뜻을 가지며
이 기반 위에 세워진 시스템의 구조를 어떻게 가져갈것인지를 설계한다
즉 키오스크는 가게라는 인프라의 아키텍쳐를 가지고 구축되어있는 서비스의 형태이다



## 집약형 아키텍쳐
![img_1.png](images%2Fimg_1.png)  


은행 업무를 보는 회사가 있으며 회사 내부의 프로그램을 하나의 컴퓨터로 관리하는 기업들이 존재한다  
이런 시스템은 최근 10년의 거래내용이나 이체처리 등 여러가지 내부 처리 시스템을 회사 내부에서 처리하고 싶어한다  

이런 복수의 서로 다른 업무처리를 동시에 실행할 수 있도록 유한한 리소스 관리를 진행하며
하나의 처리가 실수로 대량의 요청을 보내더라도 다른처리에 영향을 주지 않도록 설계해야 한다


마치 원룸에 여러 사람이 동거는 방식과 비슷하다

이같은 시스템을 기간시스템이라 부르며 은행이라면 계정 시스템이 여기에 해당된다!
한개의 서버에 많은 서비스가 몰려있게 되므로 확장성과 서버의 업그레이드의 한계가 존재한다


장점
- 한대의 대형 컴퓨터만 있으면 되므로 구성이 간단하다
- 대형 컴퓨터의 리소스 관리나 이중화에 의해 안정성이 높고 고성능이다

단점
- 대형 컴퓨터의 도입 비용과 유지 비용이 크다
- 확장성에는 한계가 존재함

## 분활형 아키텍쳐
![img_2.png](images%2Fimg_2.png)  

집약형 아키텍쳐와는 달리 여러대의 컴퓨터를 조합하여 하나의 시스템을 구축하는 구조이며  
대형 컴퓨터는 안정성이 높고 고성능(프로세서간 통신이 가능함)이지만  
현재는 이런 분활형 아키텍쳐도 HW성능이 발달함에 따라 많이 개선되어지고 있다

분산형 시스템은 한대의 컴퓨터가 고장나더라도 안정성을 담보하고 있다  
이 아키텍쳐는 표준 os나 개발언어를 이용하여 개발하기때문에 **오픈 시스템**이라 부르기도 한다  
또 여러 대의 컴퓨터를 연결해서 이용하기 때문에 분산 시스템이라 부르는 경우도 있다!

이 시스템 아키텍쳐의 장점은 집약형 아키텍쳐에 비해 비용이 압도적으로 저렴하며  
더 많은 컴퓨터를 사용하여 많은 사용자가 몰려오는경우 전체 성능을 향상시킬 수 있는 확장성이 늘어나게된다

하지만 서버의 수가 늘어날수록 구조가 복잡해지며 서버가 망가지는경우 영향범위를 최소화하기위해  
서버의 역할을 세세하게 검토하여 설계해야 한다

서버의 분활하는 일반적인 방식으로는 수직형,수평형의 두가지가 존재한다

### 장점
- 낮은 비용으로 시스템을 구축할 수 있다
- 서버 대수를 늘릴 수 있어 확장성이 높다!

### 단점
- 대수가 늘어나며 관리 구조가 복잡해진다
- 한대가 망가지면 영향 범위를 최소화해야한다




## 물리서버와 논리 서버의 차이

hw적인 서버를 물리서버
HTML,api,db등을 따로 제공하는것을 논리서버라고 부름


## 수직분활형 아키텍쳐
![img_3.png](images%2Fimg_3.png)  
> 클라이언트 - 서버형 아키텍쳐

업무 어플리케이션,미들웨어,데이터베이스 등의 소프트웨어를 물리서버 상에서 운영하고 잇다
이들은 소프트웨어에 클라이언트 또는 단말이라 부르는 소형컴퓨터가 접속해서 이용하는 형태이며

이를 Client/Server라 부르며 이 앞글자를 따서 C/S라고 부르기도 한다

이 특징은 클라이언트(단말)에 pc,moblie 을 사용하게되며
이 클라이언트에 전용 소프트웨어를 설치하거나 서버로 접속할 시스템을 구축하여야 한다

다만 이런 경우 업무 기능이나 버그수정을 하게 되는경우 클라이언트와 서버 모두 업데이트를 진행해주어야 한다
이용자가 반드시 업데이트 한다는 보장이 없기때문에 시스템의 위협요소가 될수도 있으며
서버에 처리가 집중되면 확장성에도 한계가 발생할 수도 있다


장점
- 클라이언트 측에서 많은 처리를 실행할 수 있어 소수의 서버로 다수의 클라이언트를 처리할 수 있음

단점
- 클라이언트의 정기적 업데이트가 필요함
- 서버 확장성의 한계가 발생할 수 있다!


## 3계층형 아키텍쳐
![img_4.png](images%2Fimg_4.png)  
C/S형태를 발전시킨 형태이며
3가지 계층으로 나누어 관리한다
이 아키텍쳐는 사용자가 웹브라우저를 사용해 시스템에 접속하며 예시로는

인터넷 검색 시스템에서 사용자가 웹브라우저에 입력하는 화면은 프레젠테이션 계층의 웹서버에 먼저 전달한다
그 뒤 웹서버는 그 요청을 뒤에있는 어플리케이션 계층의 어플리케이션계층(AP서버)에 전달한다


AP서버는 검색키워드를 바탕으로 무엇을 검색해야할지 판단해서 뒤에 있는 데이터 계층의 데이터베이스
(DB서버)에 데이터를 요청한다


프레젠테이션 계층
- 사용자의 입력을 받음
- 웹 브라우저 화면을 표시

어플리케이션 계층
- 사용자 요청에 따라 업무처리를 진행함

데이터계층
- 어플리케이션 계층에 따라 데이터입출력관리를 진행


이아키텍쳐의 장점은 모든 서비스의 처리를 이 3가지의 계층을 통과할 필요없이
단순히 파일만 제공하는경우 데이터계층에서 바로 사용자에게 데이터를 전송해줄 수 있는 등
여러가지 상황에 따라 서버의 계층의 분산을 줄일수도있지만
시스템의 구조가 C/S방식에 비해 복잡하다

장점
- 서버 부하 집중 개선
- 클라이언트의 정기업데이트가 불필요해짐
- "처리 반환"에 의한 서버 부하를 절감

단점
- C/S구조에 비해 복잡함

일반적으로 사용하게 되는 대부분의 서비스는 이 방식을 사용하여 구축되어있으며
앞으로 설명할 인프라 구조는 이 기반으로 설명이 진행될 예정이다!

>웹은 클라이언트-서버 구조를 대채할 수 있을까?  
> 현대 웹의 경향은 브라우저 다기능화가 있다  
> 동영상,게임,엑셀 등의 어플리케이션을 브라우저에서 제공하고 있는 서비스를 볼 수 있다  
> 
> 이런 기능을 제공하기 위해 브라우저 통신을 위한 웹소켓이라는 기술을 사용하여  
> 요청이 없어도 웹서버가 브라우저에 데이터를 전달할 수 있다  
> 이를 통해 브라우저가 더 많은 것을 실행할 수 있는 형태로 진화되어왔다  
> 
> 브라우저는 단순히 인터넷 컨텐츠를 표시하는 용도의 소프트웨어가 아닌 다기능 단말이 되어가고있다  
> 이것은 3계층 아키텍쳐 상에서 C/S를 동작시키고 있는것과 같다  
> 
> 이런 제약이 생긴 발상은 그 제약을 제거함으로 기존의 방식으로 회귀하고 있다


## 수평 분활형 아키텍쳐
수평분활형 아키텍쳐는 용도가 같은 서버를 늘려나가는 방식이며
서버의 대수가 늘어나면 한대가 시스템에 주는 영향력이 낮아져서 안정성이 향상된다

### 단순 수평 분활형 아키텍쳐
![img_4.png](images%2Fimg_4.png)  

위 그림에서는 서울본사와 부산 지사 시스템이 완전히 분활되어있다
서울에서 부산본사의 정보를 얻고싶다면 부산지사측의 시스템에 접속하면된다

수평분활은 Shardingor Partitioning이라고 부르기도 한다

두개의 독립된 시스템을 사용하기에 시스템 전체 처리성능이 두배로 향상되며
한쪽의 서버의 장애가 발생되더라도 다른시스템에 영향을 미치지 않기때문에 독립성이 향상된다

다만 서울과 부산 모두 같은 어플리케이션을 사용하고있는경우
어플리케이션 업데이트를 양쪽 시스템에 매번 실시해주어야 하며
데이터도 양쪽서버가 다르게 보유하고 있기때문에 양쪽 데이터를 일원화해서 이용할 수 없다는 문제도 존재한다


