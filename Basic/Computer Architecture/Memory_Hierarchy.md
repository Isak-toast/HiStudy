# 메모리 계층 구조 (Memory Hierarchy)

> 작성자 : 박리나

<details>
<summary>메모리 계층 구조 (Memory Hierarchy)</summary>

- [메모리 계층 구조]
</details>

---

### 메모리 계층 구조 (Memory Hierarchy)

![memory hierarchy](image.png)

메모리 계층 구조 (Memory Hierarchy) 란 메모리를 속도, 용량, 비용간의 절충 관계를 고려하여 필요에 따라 여러가지 종류로 나누어둠을 의미한다. 이때 필요란 대부분의 경우 CPU가 메모리에 더 빨리 접근하기 위함이다.

<span style="color:red">계층 구조에서 위쪽으로 올라갈수록 CPU 코어에 가까워지기 때문에 CPU가 메모리에 더 빨리 접근할 수 있지만, 그만큼 비용이 많이 들고 저장 용량은 적다.</span>

<span>계층 구조 아래쪽으로 내려갈수록 다음 내용이 성립한다.</span>

- 비트당 비용 감소
- 용량 증가
- 접근 시간 증가 (속도 느림)
- 처리기에 의한 메모리 접근 회수 감소

![memory hierarchy2](image-1.png)

- 레지스터와 캐시는 CPU 내부에 존재. CPU는 아주 빠르게 접근 가능
- 메모리는 CPU 외부에 존재. 레지스터와 캐시보다 더 느리게 접근 할 수 밖에 없다.
- 하드 디스크는 CPU가 직접 접근할 방법조차 없다. CPU가 하드 디스크에 접근하기 위해서는 하드 디스크의 데이터를 메모리로 이동 시키고 메모리에서 접근해야 한다. 아주 느린 접근 밖에 불가능

### 필요성

- 비용적인 측면
  - 레지스터, 캐시, 메모리, 하드 디스크는 하드웨어적으로 만들어지는 방법이 다를 때가 많다.
- 속도적인 측면
  - CPU와 가까이 있는 레지스터가 가장 빠르게 접근 가능하고 밑으로 내려갈수록 접근 속도 감소
- 자주 쓰이는 데이터 재사용 = 참조의 지역성(locality of reference)
  - 자주 쓰이는 데이터는 반복해서 쓰인다.

#### 참조의 지역성(locality of reference)

프로그램은 일반적으로 많은 반복 루프와 서브 루틴을 포함하고 있다. 일단 루프나 서브 루틴으로 진입하면, 적은 수의 명령어 집단들이 반복해서 참조 된다.
따라서 자주 쓰일것 같은 데이터는 메모리에서 캐시로 읽어와서 메모리까지 가지 않고 한동안 캐시에서 해결이 가능하므로 시간을 단축시킨다.
전체 프로그램 중 일부 데이터를 집중 사용하는 것이기에 메모리 용량이 작아도 된다.

### 계층 종류와 특징

#### 1. 레지스터(Register)

- CPU 내부에 위치하며 가장 빠르지만 용량이 매우 작은 메모리
- 일반적으로 현재 계산을 수행중인 값을 저장하는 데 사용

#### 2. 캐시 메모리(Cache Memory)

- CPU와 메인 메모리 사이에 위치하여 자주 사용되는 데이터의 접근 속도를 향상시키는 역할을 한다.
- 메모리 접근은 특정한 위치의 근방에서 자주 일어나는 경향이 있기 때문에, 데이터를 크기는 작지만 속도가 빠른 캐시 메모리에 복사해두면 평균 메모리 접근 시간을 단축시킬 수 있다.
- 여러 레벨(L1, L2, L3)이 있다.
  ![Cache Memory](image-2.png)

- 프로세서가 메인 메모리를 읽거나 쓰고자 할 때 먼저 그 주소에 해당하는 데이터가 캐시에 존재하는지 확인한다. 만약 그 주소의 데이터가 캐시에 있으면 데이터를 캐시에서 직접 읽고, 그렇지 않으면 메인 메모리에 직접 접근한다.

#### 3. 주 메모리(Main Memory or RAM)

- 프로그램 실행 중에 필요한 데이터와 명령어를 저장하는 곳으로, 접근 속도는 캐시보다 느리지만 용량이 크다.
- CPU에서 직접 접근이 가능한 메모리. 대표적으로 RAM과 ROM이 존재
  - RAM(Random Access Memory, 임의접근 기억장치)
    ![RAM](image-3.png) - 사용자가 자유롭게 내용을 읽고 쓰고 지울 수 있는 기억 장치. - 컴퓨터가 켜지는 순간부터 CPU는 연산을 하고 동작에 필요한 모든 내용이 전원이 유지되는 내내 이 기억 장치에 저장된다. - 전원이 꺼지면 기억된 내용이 모두 사라지는 휘발성 메모리 - RAM은 어느 위치에 저장된 데이터든지 접근(읽기 및 쓰기)하는데 동일한 시간이 걸리는 메모리라서 '랜덤(Random, 무작위)' 라는 명칭이 주어짐
  - ROM(Read Only Memory)
    - ROM은 기억된 내용을 읽을 수만 있는 기억 장치로써 일반적으로 쓰기는 불가능
    -

#### 4. 보조 메모리(Secondary Storage)

- 하드 드라이브(HDD), 솔리드 스테이트 드라이브(SSD) 등이 여기에 속하며, 대용량 데이터를 저장하지만 접근 속도는 주 메모리보다 훨씬 느립니다.
